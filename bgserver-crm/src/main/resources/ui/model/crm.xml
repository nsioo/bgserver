<!--
  ~ /*
  ~  *
  ~  *  *
  ~  *  *  * Copyright (c) Shanghai Xing Ye, Co. Ltd.
  ~  *  *  * https://bg.work
  ~  *  *  *
  ~  *  *  * GNU Lesser General Public License Usage
  ~  *  *  * Alternatively, this file may be used under the terms of the GNU Lesser
  ~  *  *  * General Public License version 3 as published by the Free Software
  ~  *  *  * Foundation and appearing in the file LICENSE.txt included in the
  ~  *  *  * project of this file. Please review the following information to
  ~  *  *  * ensure the GNU Lesser General Public License version 3 requirements
  ~  *  *  * will be met: https://www.gnu.org/licenses/lgpl-3.0.html.
  ~  *  *
  ~  *
  ~  */
  ~
  -->

<ui>

    <inherit>



        <xpath expression="/ui/model[@app='core'][@name='partner']/view/edit" op="append" app="core">
            <field name="events" style="relation"/>
            <field name="customers" style="relation"/>
            <field name="leads" style="relation"/>
            <field name="orderInvoices" style="relation"/>
            <field name="orderReceipts" style="relation"/>
        </xpath>

        <xpath expression="/ui/model[@app='core'][@name='partner']/view/detail" op="append" app="core">
            <field name="events" style="relation"/>
            <field name="customers" style="relation"/>
            <field name="leads" style="relation"/>
            <field name="orderInvoices" style="relation"/>
            <field name="orderReceipts" style="relation"/>
        </xpath>

        <xpath expression="/ui/model[@app='product'][@name='product']/view/detail" op="append" app="product">
            <field name="customerOpportunities" style="relation"/>
        </xpath>
        <xpath expression="/ui/model[@app='product'][@name='product']/view/edit" op="append" app="product">
            <field name="customerOpportunities" style="relation"/>
        </xpath>
    </inherit>

    <model name="customer" app="crm">
        <view type="list">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="main|sub"/>
                    </action>
                    <action>
                        <group name="opAction" refType="main|sub"/>
                    </action>
                </actions>
            </ref>
            <field name="id" type="singleLineText"/>
            <field name="name" type="singleLineText" style="head"/>
            <field name="isCorp" type="singleCheckbox" style="head"/>
            <field name="event" type="many2OneDataSetSelect"/>
            <field name="mobile" type="singleLineText"/>
            <field name="fax" type="singleLineText"/>
            <field name="telephone" type="singleLineText"/>
            <field name="email" type="singleLineText"/>
            <field name="website" type="singleLineText"/>
            <field name="sex" type="singleLineText"/>
            <field name="birthday" type="singleLineText"/>
            <field name="comment" type="singleLineText"/>
        </view>
        <view type="create">
            <ref>

                <actions>
                    <action>
                        <group name="main" refType="main|sub"/>
                    </action>
                </actions>

                <views>
                    <view type="list"
                          ownerField="contactAddresses"
                          model="customerContactAddress"
                          refType="main|sub"/>
                    <view type="list"
                          ownerField="opportunities"
                          model="customerOpportunity"
                          refType="main|sub"/>
                    <view type="list"
                          ownerField="partners"
                          model="crmPartnerCustomerRel"
                          refType="main|sub"/>
                </views>

            </ref>
            <field name="name" type="singleLineText" style="head" title="公司|姓名"/>
            <field name="isCorp" type="singleCheckbox" style="head"/>
            <field name="event.name" type="many2OneDataSetSelect"/>
            <field name="mobile" type="singleLineText"/>
            <field name="fax" type="singleLineText"/>
            <field name="telephone" type="singleLineText"/>
            <field name="email" type="singleLineText"/>
            <field name="department" type="singleLineText"/>
            <field name="sex"  type="singleCheckbox" visible="isCorp!=1"/>
            <field name="website" type="singleLineText"/>
            <field name="birthday" type="date" visible="isCorp!=1"/>
            <field name="fullAddress" type="chinaFullAddress"/>
            <field name="comment" type="singleLineText"/>
            <field name="contactAddresses" style="relation"/>
            <field name="opportunities" style="relation"/>
            <field name="partners" style="relation"/>
        </view>

        <view type="edit">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="main|sub"/>
                    </action>
                </actions>
                <views>
                    <view type="list"
                          ownerField="contactAddresses"
                          model="customerContactAddress"
                          refType="main|sub"/>
                    <view type="list"
                          ownerField="opportunities"
                          model="customerOpportunity"
                          refType="main|sub"/>
                    <view type="list"
                          ownerField="partners"
                          model="crmPartnerCustomerRel"
                          refType="main|sub"/>
                    <view type="detail"
                          ownerField="partners"
                          model="crmPartnerCustomerRel"
                          refType="none"/>
                </views>
            </ref>
            <field name="name" type="singleLineText" style="head"/>
            <field name="isCorp" type="singleCheckbox" style="head"/>
            <field name="event" type="many2OneDataSetSelect"/>
            <field name="mobile" type="singleLineText"/>
            <field name="fax" type="singleLineText"/>
            <field name="telephone" type="singleLineText"/>
            <field name="email" type="singleLineText"/>
            <field name="department" type="singleLineText"/>
            <field name="sex"  type="singleCheckbox" visible="isCorp!=1"/>
            <field name="website" type="singleLineText"/>
            <field name="birthday" type="date" visible="isCorp!=1"/>
            <field name="fullAddress" type="chinaFullAddress"/>
            <field name="comment" type="singleLineText"/>
            <field name="contactAddresses" style="relation"/>
            <field name="opportunities" style="relation"/>
            <field name="partners" style="relation"/>
            <field name="commPartner" style="relation"/>
        </view>

        <view type="detail">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="main|sub"/>
                    </action>
                </actions>
                <views>
                    <view type="list"
                          ownerField="contactAddresses"
                          model="customerContactAddress"
                          refType="none"/>
                    <view type="list"
                          ownerField="opportunities"
                          model="customerOpportunity"
                          refType="none"/>
                    <view type="list"
                          ownerField="partners"
                          model="crmPartnerCustomerRel"
                          refType="none"/>
                    <view type="detail"
                          ownerField="partners"
                          model="crmPartnerCustomerRel"
                          refType="none"/>
                </views>
            </ref>
            <field name="name" type="singleLineText" style="head"/>
            <field name="isCorp" type="singleCheckbox" style="head"/>
            <field name="event" type="many2OneDataSetSelect"/>
            <field name="mobile" type="singleLineText"/>
            <field name="fax" type="singleLineText"/>
            <field name="telephone" type="singleLineText"/>
            <field name="email" type="singleLineText"/>
            <field name="department" type="singleLineText"/>
            <field name="sex"  type="singleCheckbox" visible="isCorp!=1"/>
            <field name="website" type="singleLineText"/>
            <field name="birthday" type="date" visible="isCorp!=1"/>
            <field name="fullAddress" type="chinaFullAddress"/>
            <field name="comment" type="singleLineText"/>
            <field name="contactAddresses" style="relation"/>
            <field name="opportunities" style="relation"/>
            <field name="partners" style="relation"/>
            <field name="commPartner" style="relation"/>
        </view>
    </model>

    <model name="event" app="crm">
        <view type="list">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="main|sub"/>
                    </action>
                    <action>
                        <group name="opAction" refType="main|sub"/>
                    </action>
                </actions>
            </ref>
            <field name="id" type="singleLineText"/>
            <field name="name" type="singleLineText" style="head"/>
            <field name="budgetCost" type="singleLineText" style="head"/>
            <field name="actualCost" type="many2OneDataSetSelect"/>
            <field name="startTime" type="date"/>
            <field name="endTime" type="date"/>
            <field name="comment" type="multiLineText"/>
        </view>

        <view type="edit">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="main|sub"/>
                    </action>
                </actions>
                <views>
                    <view type="list" model="crmPartnerEventRel" ownerField="magPartners" refType="sub"/>
                    <view type="list" model="lead" ownerField="leads" refType="sub"/>
                    <view type="list" model="customer" ownerField="customers" refType="sub"/>
                </views>
            </ref>
            <field name="name" type="singleLineText" style="head"/>
            <field name="budgetCost" type="singleLineText" style="subHead"/>
            <field name="actualCost" type="singleLineText" style="subHead"/>
            <field name="startTime" type="date"/>
            <field name="endTime" type="date"/>
            <field name="comment" type="multiLineText"/>
            <field name="magPartners" style="relation"/>
            <field name="leads" style="relation"/>
            <field name="customers" style="relation"/>
        </view>

        <view type="create">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="main|sub"/>
                    </action>
                </actions>
                <views>
                    <view type="list" model="crmPartnerEventRel" ownerField="magPartners" refType="sub"/>
                </views>
            </ref>
            <field name="name" type="singleLineText" style="head"/>
            <field name="budgetCost" type="singleLineText" style="subHead"/>
            <field name="actualCost" type="singleLineText" style="subHead"/>
            <field name="startTime" type="date"/>
            <field name="endTime" type="date"/>
            <field name="comment" type="multiLineText"/>
            <field name="magPartners" style="relation"/>
        </view>
        <view type="detail">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="main|sub"/>
                    </action>
                </actions>
                <views>
                    <view type="list" model="crmPartnerEventRel" ownerField="magPartners" refType="none"/>
                    <view type="list" model="lead" ownerField="leads" refType="none"/>
                    <view type="list" model="customer" ownerField="customers" refType="none"/>
                </views>
            </ref>
            <field name="name" type="static" style="head"/>
            <field name="budgetCost" type="static" style="subHead"/>
            <field name="actualCost" type="static" style="subHead"/>
            <field name="startTime" type="static"/>
            <field name="endTime" type="static"/>
            <field name="comment" type="static"/>
            <field name="magPartners" style="relation"/>
            <field name="leads" style="relation"/>
            <field name="customers" style="relation"/>
        </view>
    </model>
    <model name="lead" app="crm">
        <view type="list">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="main|sub"/>
                    </action>
                    <action>
                        <group name="opAction" refType="main|sub"/>
                    </action>
                </actions>
            </ref>
            <field name="id" type="singleLineText" style="head"/>
            <field name="name" type="singleLineText" style="head"/>
            <field name="corpName" type="singleLineText"/>
            <field name="mobile" type="singleLineText"/>
            <field name="telephone" type="singleLineText"/>
            <field name="fax" type="singleLineText"/>
            <field name="commPartner.name" type="singleLineText"/>
            <field name="event.name" type="singleLineText"/>
            <field name="interactionStatus.name" type="singleLineText"/>
        </view>
        <view type="edit">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="main|sub"/>
                    </action>
                </actions>
                <views>
                    <view type="list" model="crmPartnerLeadRel" ownerField="partners" refType="main|sub"/>
                    <view type="detail" model="partner" ownerField="commPartner" refType="none"/>
                    <view type="list" model="leadCustomerCommunicationHistory" ownerField="communications"
                          refType="none"/>
                </views>
            </ref>
            <field name="name" type="singleLineText" style="head"/>
            <field name="interactionStatus.name" type="many2OneDataSetSelect" style="head"/>
            <field name="event" style="many2OneDataSetSelect"/>
            <field name="corpName" type="singleLineText"/>
            <field name="mobile" type="singleLineText"/>
            <field name="telephone" type="singleLineText"/>
            <field name="fax" type="singleLineText"/>
            <field name="fullAddress" type="chinaFullAddress"/>

            <field name="partners" style="relation"/>
            <field name="commPartner" style="relation"/>
            <field name="communications" style="relation"/>
        </view>
        <view type="create">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="main|sub"/>
                    </action>
                </actions>
                <views>
                    <view type="list" model="crmPartnerLeadRel" ownerField="partners" refType="main|sub"/>
                </views>
            </ref>
            <field name="name" type="singleLineText" style="head"/>
            <field name="interactionStatus.name" type="many2OneDataSetSelect" style="head"/>
            <field name="event.name" type="many2OneDataSetSelect"/>
            <field name="corpName" type="singleLineText"/>
            <field name="mobile" type="singleLineText"/>
            <field name="telephone" type="singleLineText"/>
            <field name="fax" type="singleLineText"/>
            <field name="fullAddress" type="chinaFullAddress"/>

            <field name="partners" style="relation"/>
        </view>
        <view type="detail">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="main|sub"/>
                    </action>
                </actions>
                <views>
                    <view type="list" model="crmPartnerLeadRel" ownerField="partners" refType="none"/>
                    <view type="detail" model="partner" ownerField="commPartner" refType="none"/>
                    <view type="list" model="leadCustomerCommunicationHistory"
                          ownerField="communications"
                          refType="none"/>
                </views>
            </ref>
            <field name="name" type="singleLineText" style="head"/>
            <field name="interactionStatus.name" type="many2OneDataSetSelect" style="head"/>
            <field name="event" style="many2OneDataSetSelect"/>
            <field name="corpName" type="singleLineText"/>
            <field name="mobile" type="singleLineText"/>
            <field name="telephone" type="singleLineText"/>
            <field name="fax" type="singleLineText"/>
            <field name="fullAddress" type="chinaFullAddress"/>

            <field name="partners" style="relation"/>
            <field name="commPartner" style="relation"/>
            <field name="communications" style="relation"/>
        </view>
    </model>
    <model name="customerStatus" app="crm">
        <view type="list">
            <field name="id" type="singleLineText" style="head"/>
            <field name="name" type="singleLineText" style="head"/>
        </view>
        <view type="edit">
            <field name="name" type="singleLineText" style="head"/>
            <field name="leads" style="relation"/>
        </view>
        <view type="create">
            <field name="name" type="singleLineText" style="head"/>
            <field name="leads" style="relation"/>
        </view>
        <view type="detail">
            <field name="name" type="singleLineText" style="head"/>
            <field name="leads" style="relation"/>
        </view>
    </model>
    <model name="leadCustomerCommunicationHistory" app="crm">
        <view type="list">
            <field name="id" type="singleLineText" style="head"/>
            <field name="content" type="singleLineText" style="head"/>
            <field name="createTime" type="singleLineText" style="head"/>
        </view>
        <view type="create">
            <field name="content" type="singleLineText"/>
        </view>
        <view type="edit">
            <field name="content" type="singleLineText"/>
        </view>
        <view type="detail">
            <field name="content" type="singleLineText"/>
        </view>
    </model>
    <model name="customerContactAddress" app="crm">
        <view type="list">
            <field name="id" type="singleLineText" style="head"/>
            <field name="name" type="singleLineText" style="head"/>
            <field name="mobile" type="singleLineText"/>
            <field name="telephone" type="singleLineText"/>
            <field name="email" type="singleLineText"/>
            <field name="department" type="singleLineText"/>
            <field name="sex" type="singleLineText"/>
            <field name="birthday" type="singleLineText"/>
            <field name="comment" type="singleLineText"/>
        </view>
        <div type="edit">
            <field name="name" type="singleLineText" style="head"/>
            <field name="mobile" type="singleLineText"/>
            <field name="telephone" type="singleLineText"/>
            <field name="email" type="singleLineText"/>
            <field name="department" type="singleLineText"/>
            <field name="sex" type="singleLineText"/>
            <field name="birthday" type="singleLineText"/>
            <field name="comment" type="singleLineText"/>
        </div>
        <div type="create">
            <field name="name" type="singleLineText" style="head"/>
            <field name="mobile" type="singleLineText"/>
            <field name="telephone" type="singleLineText"/>
            <field name="email" type="singleLineText"/>
            <field name="department" type="singleLineText"/>
            <field name="sex" type="singleLineText"/>
            <field name="birthday" type="singleLineText"/>
            <field name="comment" type="singleLineText"/>
        </div>
        <div type="detail">
            <field name="name" type="singleLineText" style="head"/>
            <field name="mobile" type="singleLineText"/>
            <field name="telephone" type="singleLineText"/>
            <field name="email" type="singleLineText"/>
            <field name="department" type="singleLineText"/>
            <field name="sex" type="singleLineText"/>
            <field name="birthday" type="singleLineText"/>
            <field name="comment" type="singleLineText"/>
        </div>
    </model>
    <model name="customerOpportunity" app="crm">
        <view type="list">
            <field name="id" type="singleLineText" style="head"/>
            <field name="title" type="singleLineText" style="head"/>
            <field name="price" type="singleLineText" style="head"/>
        </view>
        <view type="edit">
            <field name="title" type="singleLineText" style="head"/>
            <field name="price" type="singleLineText"/>
        </view>
        <view type="create">
            <field name="title" type="singleLineText" style="head"/>
            <field name="price" type="singleLineText"/>
        </view>
        <view type="detail">
            <field name="title" type="singleLineText" style="head"/>
            <field name="price" type="singleLineText"/>
        </view>
    </model>
    <model name="customerOpportunityOrderQuotation" app="crm">
        <view type="list">
            <field name="id" type="singleLineText" style="head"/>
            <field name="opportunity.title" type="singleLineText"/>
            <field name="order.title" type="singleLineText"/>
        </view>
        <view type="edit">

        </view>
        <view type="create">

        </view>
        <view type="detail">

        </view>
    </model>
    <model name="customerOrder" app="crm">
        <view type="list">
            <field name="id" type="singleLineText" style="head"/>
            <field name="title" type="singleLineText" style="head"/>
            <field name="price" type="singleLineText"/>
            <field name="customer.name" type="singleLineText"/>
        </view>
        <view type="edit">
            <field name="title" type="singleLineText" style="head"/>
            <field name="price" type="singleLineText"/>
        </view>
        <view type="create">
            <field name="title" type="singleLineText" style="head"/>
            <field name="price" type="singleLineText"/>
        </view>
        <view type="detail">
            <field name="title" type="singleLineText" style="head"/>
            <field name="price" type="singleLineText"/>
        </view>
    </model>
    <model name="customerOrderInvoice" app="crm">
        <view type="list">
            <field name="id" type="singleLineText" style="head"/>
            <field name="fromCorpName" type="singleLineText"/>
            <field name="toCorpName" type="singleLineText"/>
            <field name="amount" type="singleLineText"/>
        </view>
        <view type="edit">
            <field name="fromCorpName" type="singleLineText"/>
            <field name="toCorpName" type="singleLineText"/>
            <field name="amount" type="singleLineText"/>
        </view>
        <view type="create">
            <field name="fromCorpName" type="singleLineText"/>
            <field name="toCorpName" type="singleLineText"/>
            <field name="amount" type="singleLineText"/>
        </view>
        <view type="detail">
            <field name="fromCorpName" type="singleLineText"/>
            <field name="toCorpName" type="singleLineText"/>
            <field name="amount" type="singleLineText"/>
        </view>
    </model>
    <model name="customerOrderReceipt" app="crm">
        <view type="list">
            <field name="id" type="singleLineText" style="head"/>
            <field name="fromCorpName" type="singleLineText"/>
            <field name="toCorpName" type="singleLineText"/>
            <field name="amount" type="singleLineText"/>
        </view>
        <view type="edit">
            <field name="fromCorpName" type="singleLineText"/>
            <field name="toCorpName" type="singleLineText"/>
            <field name="amount" type="singleLineText"/>
        </view>
        <view type="create">
            <field name="fromCorpName" type="singleLineText"/>
            <field name="toCorpName" type="singleLineText"/>
            <field name="amount" type="singleLineText"/>
        </view>
        <view type="detail">
            <field name="fromCorpName" type="singleLineText"/>
            <field name="toCorpName" type="singleLineText"/>
            <field name="amount" type="singleLineText"/>
        </view>
    </model>
    <model name="crmCustomerOpportunityProductRel" app="crm">
        <view type="list">

        </view>
        <view type="edit">

        </view>
        <view type="create">

        </view>
        <view type="detail">

        </view>
    </model>
    <model name="crmCustomerOrderProductRel" app="crm">
        <view type="list">

        </view>
        <view type="edit">

        </view>
        <view type="create">

        </view>
        <view type="detail">

        </view>
    </model>
    <model name="crmPartnerCustomerRel" app="crm">
        <view type="list">

        </view>
        <view type="edit">

        </view>
        <view type="create">

        </view>
        <view type="detail">

        </view>
    </model>
    <model name="crmPartnerEventRel" app="crm">
        <view type="list">

            <ref>
                <actions>
                    <action>
                        <group name="main" refType="sub"/>
                    </action>
                </actions>
            </ref>

            <field name="id" type="singleLineText"/>
            <field name="partner.name" type="singleLineText"/>
            <field name="mainFlag" type="singleLineText"/>

        </view>
        <view type="edit">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="sub"/>
                    </action>
                </actions>
            </ref>
            <field name="partner.name" type="many2OneDataSetSelect" style="head"/>
            <field name="magFlag" type="singleCheckbox"/>
        </view>
        <view type="create">
            <ref>
                <actions>
                    <action>
                        <group name="main" refType="sub"/>
                    </action>
                </actions>
            </ref>
            <field name="partner.name" type="many2OneDataSetSelect" style="head"/>
            <field name="magFlag" type="singleCheckbox"/>
        </view>
        <view type="detail">

        </view>
    </model>
    <model name="crmPartnerLeadRel" app="crm">
        <view type="list">

        </view>
        <view type="edit">

        </view>
        <view type="create">

        </view>
        <view type="detail">

        </view>
    </model>
</ui>